<%- include('partials/header') -%>

  <main class="main">

    <!-- Add Employee -->
    <section id="about" class="about section">

      <!-- Section Title -->
      <div class="container section-title" data-aos="fade-up">
        <h2>Employees</h2>        
      </div><!-- End Section Title -->

      <div class="container">
        <div class="row">
          <p><a href="/addEmployee"><button type="button" class="btn btn-primary" style="float: left;">Add Employee</button></a></p>
        <!------------------Listing Employees-------------------------->
          <table class="table table-striped table-bordered table-hover" id="empTable">
          <thead>
            <tr>             
              <th scope="col">Name</th>
              <th scope="col">Email Address</th>
              <th scope="col">Phone Number</th>
              <th scope="col">Gender</th>
              <th scope="col">Cafe</th>
              <th scope="col">Location</th>
              <th scope="col">Hire Date</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody>
            
             <% emps.forEach(emp => { %>
            <tr>
              
              <td class="empname"><%= emp.emp_name %></td>
              <td width="10%" class="empmail"><%= emp.email_address%></td>
              <td class="empphone"><%= emp.phone_number %></td>
              <td width="10%" class="empphone"><%= emp.gender %></td>
              <td width="10%"><%= emp.name%></td>
              <td width="10%"><%= emp.location%></td>
              <td><%= emp.hire_date%></td>
              <td>
                <a class="btn btn-primary" href="/editEmployee/<%= emp.empid %>">Edit</a>
                  <form style="display: inline;" action="/deleteEmployee/<%= emp.empid %>?_method=DELETE" method="POST">
                      <input type="hidden" name="_method" value="DELETE">
                      <button style="cursor: pointer;" type="submit" class="btn btn-danger ml-2">Delete</button>
                  </form>            
              </td>
            </tr>
           
            <% }) %>           
            </tbody>
          </table>
        </div>

      </div>
    </section><!-- /Add Employee -->
  </main>
  <%- include('partials/footer') -%>
  <script>
$(document).ready(function(){


  $('#empTable').dataTable( {
  //"dom": 'rtip',
    "bInfo" : false,
  "searching": true,
  "pagingType": "simple_numbers",
  "pageLength": 5,
  //"order": [[1, 'desc']] 
} );



  $('[data-toggle="tooltip"]').tooltip();
  var actions = $("table td:last-child").html();
  // Append table with add row form on add new button click
    $(".add-new").click(function(){
    $(this).attr("disabled", "disabled");
    var index = $("table tbody tr:last-child").index();
        var row = '<tr>' +
            '<td><input type="text" class="form-control" name="name" id="name"></td>' +
            '<td><input type="text" class="form-control" name="department" id="department"></td>' +
            '<td><input type="text" class="form-control" name="phone" id="phone"></td>' +
      '<td>' + actions + '</td>' +
        '</tr>';
      $("table").append(row);   
    $("table tbody tr").eq(index + 1).find(".add, .edit").toggle();
        $('[data-toggle="tooltip"]').tooltip();
    });
});













</script>

</body>

</html>